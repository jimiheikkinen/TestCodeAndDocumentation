# A simple command-line contact book application.

def display_menu():
    """
    Prints the main menu options for the user.
    This function doesn't take any arguments or return anything.
    """
    print("\n--- Contact Book Menu ---")
    print("1. Add a new contact")
    print("2. View all contacts")
    print("3. Search for a contact")
    print("4. Exit")
    print("-------------------------")

def add_contact(contacts):
    """
    Prompts the user for contact details and adds them to the list.
    
    Args:
        contacts (list): The list of contact dictionaries.
        
    Returns:
        list: The updated list of contacts.
    """
    print("\nEnter new contact details:")
    name = input("Name: ")
    phone = input("Phone Number: ")
    email = input("Email Address: ")
    
    contacts.append({
        "name": name,
        "phone": phone,
        "email": email
    })
    print(f"\n‚úÖ Success: Contact '{name}' has been added.")
    return contacts

def view_contacts(contacts):
    """
    Displays all saved contacts in a formatted way.
    
    Args:
        contacts (list): The list of contact dictionaries.
    """
    if not contacts:
        print("\n‚ÑπÔ∏è Your contact book is empty.")
        return

    print("\n--- All Contacts ---")
    for i, contact in enumerate(contacts, 1):
        print(f"{i}. Name:  {contact['name']}")
        print(f"   Phone: {contact['phone']}")
        print(f"   Email: {contact['email']}")
        print("-" * 20)

def search_contact(contacts):
    """
    Searches for a contact by name (case-insensitive) and displays the results.
    
    Args:
        contacts (list): The list of contact dictionaries.
    """
    if not contacts:
        print("\n‚ÑπÔ∏è Your contact book is empty. Nothing to search.")
        return
        
    search_term = input("\nEnter the name to search for: ").lower()
    found_contacts = [
        contact for contact in contacts 
        if search_term in contact['name'].lower()
    ]

    if not found_contacts:
        print(f"\n‚ùå No contacts found matching '{search_term}'.")
    else:
        print(f"\n--- Search Results ({len(found_contacts)} found) ---")
        for contact in found_contacts:
            print(f"   Name:  {contact['name']}")
            print(f"   Phone: {contact['phone']}")
            print(f"   Email: {contact['email']}")
            print("-" * 20)

def main():
    """
    The main function to run the contact book application loop.
    """
    contact_list = []
    print("Welcome to your personal Contact Book! üìñ")

    while True:
        display_menu()
        choice = input("Please enter your choice (1-4): ")

        if choice == '1':
            contact_list = add_contact(contact_list)
        elif choice == '2':
            view_contacts(contact_list)
        elif choice == '3':
            search_contact(contact_list)
        elif choice == '4':
            print("\nExiting the Contact Book. Goodbye! üëã")
            break
        else:
            print("\n‚ö†Ô∏è Invalid choice. Please enter a number between 1 and 4.")
